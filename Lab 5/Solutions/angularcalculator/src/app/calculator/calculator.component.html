<h4>Kalkulator</h4>

<div id="floating_container">
  <div id="calculator_container" class="blocks">
    <input id="display" type="text" [(ngModel)]="display">
    <table>
      <tr>
        <td>x!</td>
        <td>abs(x)</td>
        <td>mod(x)</td>
        <td><input class='calc_button' type="button" (click)="clear()" value="C"></td>
      </tr>
      <tr>
        <td>sqrt(x)</td>
        <td>1/x</td>
        <td>log(x)</td>
        <td><input class='calc_button' type="button" (click)="backspace()" value="Bcksp"></td>
      </tr>
      <tr>
        <td><input class='calc_button' type="button" (click)="bracket(true)" value="("></td>
        <td><input class='calc_button' type="button" (click)="bracket(false)" value=")"></td>
        <td><input class='calc_button' type="button" (click)="infix_operator('^')" value="x^y"></td>
        <td><input class='calc_button' type="button" (click)="infix_operator('/')" value="/"></td>
      </tr>
      <tr>
        <td><input class='calc_button' type="button" (click)="digit(7)" value="7"></td>
        <td><input class='calc_button' type="button" (click)="digit(8)" value="8"></td>
        <td><input class='calc_button' type="button" (click)="digit(9)" value="9"></td>
        <td><input class='calc_button' type="button" (click)="infix_operator('*')" value="*"></td>
      </tr>
      <tr>
        <td><input class='calc_button' type="button" (click)="digit(4)" value="4"></td>
        <td><input class='calc_button' type="button" (click)="digit(5)" value="5"></td>
        <td><input class='calc_button' type="button" (click)="digit(6)" value="6"></td>
        <td><input class='calc_button' type="button" (click)="infix_operator('-')" value="-"></td>
      </tr>
      <tr>
        <td><input class='calc_button' type="button" (click)="digit(1)" value="1"></td>
        <td><input class='calc_button' type="button" (click)="digit(2)" value="2"></td>
        <td><input class='calc_button' type="button" (click)="digit(3)" value="3"></td>
        <td><input class='calc_button' type="button" (click)="infix_operator('+')" value="+"></td>
      </tr>
      <tr>
        <td>+/-</td>
        <td><input class='calc_button' type="button" (click)="digit(0)" value="0"></td>
        <td><input class='calc_button' type="button" (click)="comma()" value=","></td>
        <td><input class='calc_button' type="button" (click)="perform()" value="="></td>
      </tr>
    </table>
  </div>

  <div id="output_container" class="blocks">
    Postać Odwróconej Notacji Polskiej: {{rpn}} <br>
    Wynik obliczenia: {{result}} <br>
    Graf wyrażenia: <br>
    <ngx-graph
      class="chart-container"
      [view]="[500, 500]"
      [links]="[
        {
          id: 'a',
          source: 'second',
          target: 'first',
          label: 'left operand'
        }, {
          id: 'b',
          source: 'third',
          target: 'first',
          label: 'right operand'
        },
      ]"
      [nodes]="[
        {
          id: 'first',
          label: 'A'
        }, {
          id: 'second',
          label: 'B'
        }, {
          id: 'third',
          label: 'C'
        },
      ]"
      [customColors]="[
        {
          name: 'A',
          value: 'yellow'
        }, {
          name: 'B',
          value: 'gray'
        }, {
          name: 'C',
          value: 'white'
        },
      ]"

    >
      <ng-template #defsTemplate>
        <svg:marker id="arrow" viewBox="0 -5 10 10" refX="8" refY="0" markerWidth="4" markerHeight="4" orient="auto">
          <svg:path d="M0,-5L10,0L0,5" class="arrow-head" />
        </svg:marker>
      </ng-template>
      <ng-template #nodeTemplate let-node>
        <svg:g class="node">
          <svg:rect [attr.width]="node.dimension.width" [attr.height]="node.dimension.height"
                    [attr.fill]="node.data.color" />
          <svg:text alignment-baseline="central" [attr.x]="10" [attr.y]="node.dimension.height / 2">{{node.label}}
          </svg:text>
        </svg:g>
      </ng-template>
      <ng-template #linkTemplate let-link>
        <svg:g class="edge">
          <svg:path class="line" stroke-width="2" marker-end="url(#arrow)"></svg:path>
          <svg:text
            class="edge-label"
            text-anchor="middle"style="fill: #666;"
            [attr.href]="'#' + link.id"
            startOffset="60%">

              {{link.label}}

          </svg:text>
        </svg:g>
      </ng-template>
    </ngx-graph>
  </div>


</div>


